; Performs 48-bit subtraction
;
; Returns:
; ude:uhl = ude:uhl - uiy:ubc

	assume	adl=1

	section	.text

	public	__i48sub
	public	__i48subu_overflow
	public	__i48subs_overflow

__i48subu_overflow:
	; returned flags:
	; NC : no unsigned overflow
	; C  : unsigned overflow occured
__i48subs_overflow:
	; returned flags:
	; PO : no signed overflow
	; PE : signed overflow occured
__i48sub:
	or	a, a
	sbc	hl, bc
	ex	de, hl
	push	bc
	lea	bc, iy
	sbc	hl, bc
	pop	bc
	ex	de, hl
	ret
