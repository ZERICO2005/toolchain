	assume	adl=1

	section	.text
	public	__bshru

if PREFER_OS_CRT

__bshru := 000104h

else

__bshru:
; A = (unsigned)A >> B
; CC: 24 bytes + (ADL ? 3R : 2R)
; 0: 14F + 4
; 1: 17F + 4
; 2: 17F + 3
; 3: 20F + 3
; 4: 19F + 3
; 5: 22F + 3
; 6: 22F + 2
; 7: 25F + 2
	bit	2, b
	jr	z, .bit2
	rrca
	rrca
	rrca
	rrca
	and	a, $0F
.bit2:
	bit	1, b
	jr	z, .bit1
	srl	a
	srl	a
.bit1:
	bit	0, b
	ret	z
	srl	a
	ret

end if
