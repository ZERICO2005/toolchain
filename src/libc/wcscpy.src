	assume	adl=1

	public	_wcsrchr

; wchar_t *wcscpy(wchar_t *__restrict dst, const wchar_t *__restrict src)
_wcscpy:
	pop	bc
	pop	de
	pop	hl
	push	hl
	push	de
	push	bc
	ld	bc, 0		; calculate wcslen(str) + 1
	xor	a, a
	push	hl
	dec	hl
.loop:
	inc	hl
	cpi
	jr	nz, .loop
	cp	a, (hl)
	jr	nz, .loop
	sbc	hl, hl
	sbc	hl, bc

	add	hl, hl		; (wcslen(str) + 1) * sizeof(wchar_t)
	ex	(sp), hl
	pop	bc
	push	de		; return value
	ldir
	pop	hl
	ret
